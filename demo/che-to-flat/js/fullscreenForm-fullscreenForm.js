!function(t){"use strict";function e(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}function s(t,e){var s=document.createElement(t);return e&&(e.cName&&(s.className=e.cName),e.inner&&(s.innerHTML=e.inner),e.appendTo&&e.appendTo.appendChild(s)),s}function i(t,s){this.el=t,this.options=e({},this.options),e(this.options,s),this._init()}var r={animations:Modernizr.cssanimations},n={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},o=n[Modernizr.prefixed("animation")];i.prototype.options={ctrlProgress:!0,ctrlNavDots:!0,ctrlNavPosition:!0,onReview:function(){return!1}},i.prototype._init=function(){this.formEl=this.el.querySelector("form"),this.fieldsList=this.formEl.querySelector("ol.fs-fields"),this.current=0,this.fields=[].slice.call(this.fieldsList.children),this.fieldsCount=this.fields.length,classie.add(this.fields[this.current],"fs-current"),this._addControls(),this._addErrorMsg(),this._initEvents()},i.prototype._addControls=function(){if(this.ctrls=s("div",{cName:"fs-controls",appendTo:this.el}),this.ctrlContinue=s("button",{cName:"fs-continue",inner:"Далее",appendTo:this.ctrls}),this._showCtrl(this.ctrlContinue),this.options.ctrlNavDots){this.ctrlNav=s("nav",{cName:"fs-nav-dots",appendTo:this.ctrls});for(var t="",e=0;e<this.fieldsCount;++e)t+=e===this.current?'<button class="fs-dot-current"></button>':"<button disabled></button>";this.ctrlNav.innerHTML=t,this._showCtrl(this.ctrlNav),this.ctrlNavDots=[].slice.call(this.ctrlNav.children)}this.options.ctrlNavPosition&&(this.ctrlFldStatus=s("span",{cName:"fs-numbers",appendTo:this.ctrls}),this.ctrlFldStatusCurr=s("span",{cName:"fs-number-current",inner:Number(this.current+1)}),this.ctrlFldStatus.appendChild(this.ctrlFldStatusCurr),this.ctrlFldStatusTotal=s("span",{cName:"fs-number-total",inner:this.fieldsCount}),this.ctrlFldStatus.appendChild(this.ctrlFldStatusTotal),this._showCtrl(this.ctrlFldStatus)),this.options.ctrlProgress&&(this.ctrlProgress=s("div",{cName:"fs-progress",appendTo:this.ctrls}),this._showCtrl(this.ctrlProgress))},i.prototype._addErrorMsg=function(){this.msgError=s("span",{cName:"fs-message-error",appendTo:this.el})},i.prototype._initEvents=function(){var t=this;this.ctrlContinue.addEventListener("click",function(){t._nextField()}),this.options.ctrlNavDots&&this.ctrlNavDots.forEach(function(e,s){e.addEventListener("click",function(){t._showField(s)})}),this.fields.forEach(function(e){if(e.hasAttribute("data-input-trigger")){var s=e.querySelector('input[type="radio"]')||e.querySelector("select");if(!s)return;switch(s.tagName.toLowerCase()){case"select":s.addEventListener("change",function(){t._nextField()});break;case"input":[].slice.call(e.querySelectorAll('input[type="radio"]')).forEach(function(e){e.addEventListener("change",function(){t._nextField()})})}}}),document.addEventListener("keydown",function(e){if(!t.isLastStep&&"textarea"!==e.target.tagName.toLowerCase()){var s=e.keyCode||e.which;13===s&&(e.preventDefault(),t._nextField())}})},i.prototype._nextField=function(t){if(this.isLastStep||!this._validade()||this.isAnimating)return!1;this.isAnimating=!0,this.isLastStep=this.current===this.fieldsCount-1&&void 0===t?!0:!1,this._clearError();var e=this.fields[this.current];if(this.navdir=void 0!==t&&t<this.current?"prev":"next",this.current=void 0!==t?t:this.current+1,void 0===t&&(this._progress(),this.farthest=this.current),classie.add(this.fieldsList,"fs-display-"+this.navdir),classie.remove(e,"fs-current"),classie.add(e,"fs-hide"),!this.isLastStep){this._updateNav(),this._updateFieldNumber();var s=this.fields[this.current];classie.add(s,"fs-current"),classie.add(s,"fs-show")}var i=this,n=function(){r.animations&&this.removeEventListener(o,n),classie.remove(i.fieldsList,"fs-display-"+i.navdir),classie.remove(e,"fs-hide"),i.isLastStep?(i._hideCtrl(i.ctrlNav),i._hideCtrl(i.ctrlProgress),i._hideCtrl(i.ctrlContinue),i._hideCtrl(i.ctrlFldStatus),classie.remove(i.formEl,"fs-form-full"),classie.add(i.formEl,"fs-form-overview"),classie.add(i.formEl,"fs-show"),i.options.onReview()):(classie.remove(s,"fs-show"),i.options.ctrlNavPosition&&(i.ctrlFldStatusCurr.innerHTML=i.ctrlFldStatusNew.innerHTML,i.ctrlFldStatus.removeChild(i.ctrlFldStatusNew),classie.remove(i.ctrlFldStatus,"fs-show-"+i.navdir))),i.isAnimating=!1};r.animations?"next"===this.navdir?this.isLastStep?e.querySelector(".fs-anim-upper").addEventListener(o,n):s.querySelector(".fs-anim-lower").addEventListener(o,n):s.querySelector(".fs-anim-upper").addEventListener(o,n):n()},i.prototype._showField=function(t){return t===this.current||0>t||t>this.fieldsCount-1?!1:void this._nextField(t)},i.prototype._updateFieldNumber=function(){if(this.options.ctrlNavPosition){this.ctrlFldStatusNew=document.createElement("span"),this.ctrlFldStatusNew.className="fs-number-new",this.ctrlFldStatusNew.innerHTML=Number(this.current+1),this.ctrlFldStatus.appendChild(this.ctrlFldStatusNew);var t=this;setTimeout(function(){classie.add(t.ctrlFldStatus,"next"===t.navdir?"fs-show-next":"fs-show-prev")},25)}},i.prototype._progress=function(){this.options.ctrlProgress&&(this.ctrlProgress.style.width=this.current*(100/this.fieldsCount)+"%")},i.prototype._updateNav=function(){this.options.ctrlNavDots&&(classie.remove(this.ctrlNav.querySelector("button.fs-dot-current"),"fs-dot-current"),classie.add(this.ctrlNavDots[this.current],"fs-dot-current"),this.ctrlNavDots[this.current].disabled=!1)},i.prototype._showCtrl=function(t){classie.add(t,"fs-show")},i.prototype._hideCtrl=function(t){classie.remove(t,"fs-show")},i.prototype._validade=function(){var t,e=this.fields[this.current],s=e.querySelector("input[required]")||e.querySelector("textarea[required]")||e.querySelector("select[required]");if(!s)return!0;switch(s.tagName.toLowerCase()){case"input":if("radio"===s.type||"checkbox"===s.type){var i=0;[].slice.call(e.querySelectorAll('input[type="'+s.type+'"]')).forEach(function(t){t.checked&&++i}),i||(t="NOVAL")}else""===s.value&&(t="NOVAL");break;case"select":(""===s.value||"-1"===s.value)&&(t="NOVAL");break;case"textarea":""===s.value&&(t="NOVAL")}return void 0!=t?(this._showError(t),!1):!0},i.prototype._showError=function(t){var e="";switch(t){case"NOVAL":e="Мы догадаться должны?";break;case"INVALIDEMAIL":e="Введите правильный email адрес"}this.msgError.innerHTML=e,this._showCtrl(this.msgError)},i.prototype._clearError=function(){this._hideCtrl(this.msgError)},t.FForm=i}(window),function(t){"use strict";function e(t,e){if(!t)return!1;for(var s=t.target||t.srcElement||t||!1;s&&s!=e;)s=s.parentNode||!1;return s!==!1}function s(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}function i(t,e){this.el=t,this.options=s({},this.options),s(this.options,e),this._init()}i.prototype.options={newTab:!0,stickyPlaceholder:!0,onChange:function(){return!1}},i.prototype._init=function(){var t=this.el.querySelector("option[selected]");this.hasDefaultPlaceholder=t&&t.disabled,this.selectedOpt=t||this.el.querySelector("option"),this._createSelectEl(),this.selOpts=[].slice.call(this.selEl.querySelectorAll("li[data-option]")),this.selOptsCount=this.selOpts.length,this.current=this.selOpts.indexOf(this.selEl.querySelector("li.cs-selected"))||-1,this.selPlaceholder=this.selEl.querySelector("span.cs-placeholder"),this._initEvents()},i.prototype._createSelectEl=function(){var t="",e=function(t){var e="",s="",i="";return!t.selectedOpt||this.foundSelected||this.hasDefaultPlaceholder||(s+="cs-selected ",this.foundSelected=!0),t.getAttribute("data-class")&&(s+=t.getAttribute("data-class")),t.getAttribute("data-link")&&(i="data-link="+t.getAttribute("data-link")),""!==s&&(e='class="'+s+'" '),"<li "+e+i+' data-option data-value="'+t.value+'"><span>'+t.textContent+"</span></li>"};[].slice.call(this.el.children).forEach(function(s){if(!s.disabled){var i=s.tagName.toLowerCase();"option"===i?t+=e(s):"optgroup"===i&&(t+='<li class="cs-optgroup"><span>'+s.label+"</span><ul>",[].slice.call(s.children).forEach(function(s){t+=e(s)}),t+="</ul></li>")}});var s='<div class="cs-options"><ul>'+t+"</ul></div>";this.selEl=document.createElement("div"),this.selEl.className=this.el.className,this.selEl.tabIndex=this.el.tabIndex,this.selEl.innerHTML='<span class="cs-placeholder">'+this.selectedOpt.textContent+"</span>"+s,this.el.parentNode.appendChild(this.selEl),this.selEl.appendChild(this.el)},i.prototype._initEvents=function(){var t=this;this.selPlaceholder.addEventListener("click",function(){t._toggleSelect()}),this.selOpts.forEach(function(e,s){e.addEventListener("click",function(){t.current=s,t._changeOption(),t._toggleSelect()})}),document.addEventListener("click",function(s){var i=s.target;t._isOpen()&&i!==t.selEl&&!e(i,t.selEl)&&t._toggleSelect()}),this.selEl.addEventListener("keydown",function(e){var s=e.keyCode||e.which;switch(s){case 38:e.preventDefault(),t._navigateOpts("prev");break;case 40:e.preventDefault(),t._navigateOpts("next");break;case 32:e.preventDefault(),t._isOpen()&&"undefined"!=typeof t.preSelCurrent&&-1!==t.preSelCurrent&&t._changeOption(),t._toggleSelect();break;case 13:e.stopPropagation(),e.preventDefault(),t._isOpen()&&"undefined"!=typeof t.preSelCurrent&&-1!==t.preSelCurrent&&(t._changeOption(),t._toggleSelect());break;case 27:e.preventDefault(),t._isOpen()&&t._toggleSelect()}})},i.prototype._navigateOpts=function(t){this._isOpen()||this._toggleSelect();var e="undefined"!=typeof this.preSelCurrent&&-1!==this.preSelCurrent?this.preSelCurrent:this.current;("prev"===t&&e>0||"next"===t&&e<this.selOptsCount-1)&&(this.preSelCurrent="next"===t?e+1:e-1,this._removeFocus(),classie.add(this.selOpts[this.preSelCurrent],"cs-focus"))},i.prototype._toggleSelect=function(){this._removeFocus(),this._isOpen()?(-1!==this.current&&(this.selPlaceholder.textContent=this.selOpts[this.current].textContent),classie.remove(this.selEl,"cs-active")):(this.hasDefaultPlaceholder&&this.options.stickyPlaceholder&&(this.selPlaceholder.textContent=this.selectedOpt.textContent),classie.add(this.selEl,"cs-active"))},i.prototype._changeOption=function(){"undefined"!=typeof this.preSelCurrent&&-1!==this.preSelCurrent&&(this.current=this.preSelCurrent,this.preSelCurrent=-1);var e=this.selOpts[this.current];this.selPlaceholder.textContent=e.textContent,this.el.value=e.getAttribute("data-value");var s=this.selEl.querySelector("li.cs-selected");s&&classie.remove(s,"cs-selected"),classie.add(e,"cs-selected"),e.getAttribute("data-link")&&(this.options.newTab?t.open(e.getAttribute("data-link"),"_blank"):t.location=e.getAttribute("data-link")),this.options.onChange(this.el.value)},i.prototype._isOpen=function(){return classie.has(this.selEl,"cs-active")},i.prototype._removeFocus=function(){var t=this.selEl.querySelector("li.cs-focus");t&&classie.remove(t,"cs-focus")},t.SelectFx=i}(window),function(t){"use strict";function e(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}function s(t){this.el=t,this.paths=[].slice.call(this.el.querySelectorAll("path")),this.pathsArr=new Array,this.lengthsArr=new Array,this._init()}function i(t,s){this.el=t,this.options=e({},this.options),e(this.options,s),this._init()}var r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},n=r[Modernizr.prefixed("transition")],o={transitions:Modernizr.csstransitions};s.prototype._init=function(){var t=this;this.paths.forEach(function(e,s){t.pathsArr[s]=e,e.style.strokeDasharray=t.lengthsArr[s]=e.getTotalLength()}),this.draw(0)},s.prototype.draw=function(t){for(var e=0,s=this.pathsArr.length;s>e;++e)this.pathsArr[e].style.strokeDashoffset=this.lengthsArr[e]*(1-t)},i.prototype.options={statusTime:1500},i.prototype._init=function(){this.button=this.el.querySelector("button"),this.progressEl=new s(this.el.querySelector("svg.progress-circle")),this.successEl=new s(this.el.querySelector("svg.checkmark")),this.errorEl=new s(this.el.querySelector("svg.cross")),this._initEvents(),this._enable()},i.prototype._initEvents=function(){var t=this;this.button.addEventListener("click",function(){t._submit()})},i.prototype._submit=function(){classie.addClass(this.el,"loading");var t=this,e=function(s){if(o.transitions){if("width"!==s.propertyName)return!1;this.removeEventListener(n,e)}this.setAttribute("disabled",""),"function"==typeof t.options.callback?t.options.callback(t):(t.setProgress(1),t.stop())};o.transitions?this.button.addEventListener(n,e):e()},i.prototype.stop=function(t){var e=this,s=function(){if(e.progressEl.draw(0),"number"==typeof t){var s=t>=0?"success":"error",i=t>=0?e.successEl:e.errorEl;i.draw(1),classie.addClass(e.el,s),setTimeout(function(){classie.remove(e.el,s),i.draw(0),e._enable()},e.options.statusTime)}else e._enable();classie.removeClass(e.el,"loading")};setTimeout(s,300)},i.prototype.setProgress=function(t){this.progressEl.draw(t)},i.prototype._enable=function(){this.button.removeAttribute("disabled")},t.UIProgressButton=i}(window);